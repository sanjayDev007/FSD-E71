<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>React Advantage Example</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    *{box-sizing:border-box}body{margin:0;font-family:Inter,system-ui,Arial;background:#0f172a;color:#e2e8f0;line-height:1.45}
    header{padding:1rem 1.5rem;background:#1e293b;display:flex;flex-wrap:wrap;gap:1rem;align-items:center;justify-content:space-between}
    h1{font-size:1.25rem;margin:0;font-weight:600}
    main{max-width:1100px;margin:1.25rem auto;padding:0 1.25rem;display:grid;gap:1.5rem;grid-template-columns:320px 1fr}
    @media (max-width:960px){main{grid-template-columns:1fr}}
    aside,section{background:#1e293b;padding:1rem 1.1rem;border:1px solid #24324a;border-radius:14px}
    code,pre{font-family:ui-monospace,Consolas,monospace;font-size:0.8rem}
    pre{background:#0b1627;padding:0.75rem;border-radius:10px;overflow:auto;max-height:320px}
    .pill{display:inline-block;background:#334155;color:#cbd5e1;padding:0.15rem .55rem;border-radius:1rem;font-size:0.65rem;letter-spacing:.5px;font-weight:600;margin-right:.35rem;margin-bottom:.35rem}
    .stack{display:flex;flex-direction:column;gap:.75rem}
    .tasks h2{margin:.25rem 0 1rem;font-size:1rem;font-weight:600}
    .toolbar{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:.75rem}
    input,select{background:#0f172a;border:1px solid #334155;color:#e2e8f0;padding:.55rem .6rem;border-radius:8px;font:inherit;min-width:0}
    input:focus,select:focus{outline:2px solid #6366f1;outline-offset:1px}
    button{background:#6366f1;color:#fff;font:inherit;font-weight:600;border:0;padding:.55rem .9rem;border-radius:8px;cursor:pointer;display:inline-flex;align-items:center;gap:.4rem}
    button.secondary{background:#334155;color:#e2e8f0}
    button.danger{background:#dc2626}
    button.small{font-size:.7rem;padding:.35rem .55rem}
    .task{background:#162133;border:1px solid #223048;padding:.65rem .7rem;border-radius:10px;display:grid;grid-template-columns:24px 1fr auto;align-items:start;gap:.6rem;position:relative}
    .task.done{opacity:.55}
    .task-title{font-weight:600;font-size:.85rem;margin:0;line-height:1.3}
    .muted{color:#94a3b8;font-size:.7rem;margin-top:.2rem}
    .counts{display:flex;gap:.6rem;flex-wrap:wrap;margin-bottom:.6rem}
    .countBox{background:#162133;border:1px solid #24324a;padding:.45rem .65rem;border-radius:8px;font-size:.65rem;font-weight:600;letter-spacing:.5px;display:flex;gap:.35rem;align-items:center}
    .sep{height:1px;background:#24324a;margin:.85rem 0}
    .empty{padding:1rem;text-align:center;font-size:.75rem;background:#162133;border:1px dashed #24324a;border-radius:10px;color:#64748b}
    .inline-edit{background:#0f172a;border:1px solid #334155;width:100%;color:#e2e8f0;border-radius:6px;padding:.4rem .5rem;font:inherit}
    footer{padding:1.5rem 1rem;text-align:center;font-size:.7rem;color:#64748b}
    a{color:#818cf8}
  </style>
</head>
<body>
  <header>
    <h1>React Example: Task Manager (Why React?)</h1>
    <div style="font-size:.7rem;color:#94a3b8;max-width:420px">Complex interactive state (lists, filters, derived counts, inline editing) becomes simpler & maintainable using React's declarative components.</div>
  </header>
  <main>
    <aside> 
      <h2 style="margin:0 0 .6rem;font-size:.9rem">Why React helps here</h2>
      <div class="stack" style="font-size:.72rem;color:#cbd5e1">
        <div><span class="pill">Declarative</span>UI describes final state; React updates DOM diff intelligently.</div>
        <div><span class="pill">Components</span>Break features into reusable units (TaskItem, Filters, Stats).</div>
        <div><span class="pill">State</span>Single source of truth (tasks array) => predictable updates.</div>
        <div><span class="pill">Derived Data</span>Counts auto-update without manual DOM queries.</div>
        <div><span class="pill">Isolation</span>Each task re-renders only when its props/state change.</div>
      </div>
      <div class="sep"></div>
      <h3 style="margin:.2rem 0 .5rem;font-size:.75rem;letter-spacing:.5px;text-transform:uppercase;color:#94a3b8">Vanilla JS pain (sample)</h3>
      <pre><code>// Imperative DOM maintenance grows quickly
function toggleTask(id){
  const el = document.querySelector('[data-id="'+id+'"]');
  // update in-memory model
  const t = tasks.find(t=>t.id===id);
  t.done = !t.done;
  // manually update UI pieces
  el.classList.toggle('done', t.done);
  el.querySelector('.task-title').textContent = t.title + (t.done?' (done)':'');
  renderCounts(); // keep counts in sync
  // Need to ensure filter state applied, etc...
}
// Many scattered functions => fragile
</code></pre>
      <p style="font-size:.65rem;color:#94a3b8;margin-top:.75rem">React replaces many imperative steps with one state update: setTasks(...).</p>
    </aside>
    <section class="tasks">
      <div id="root"></div>
    </section>
  </main>
  <footer>Built with React 18 via CDN. No build step. | <a href="https://react.dev" target="_blank" rel="noopener">Docs</a></footer>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useState, useMemo, useCallback, memo } = React;

    // Utility: id generator
    const uid = () => Math.random().toString(36).slice(2,9);

    // Pure component: statistics bar
    const Stats = memo(function Stats({ total, done, filtered, activeFilter }) {
      return (
        <div className="counts">
          <div className="countBox">All <strong>{total}</strong></div>
          <div className="countBox">Done <strong>{done}</strong></div>
          <div className="countBox">Filtered <strong>{filtered}</strong></div>
          <div className="countBox">Filter <strong>{activeFilter}</strong></div>
        </div>
      );
    });

    const Filters = memo(function Filters({ filter, setFilter, search, setSearch, sort, setSort }) {
      return (
        <div className="toolbar">
          <select value={filter} onChange={e=>setFilter(e.target.value)} aria-label="Status filter">
            <option value="all">All</option>
            <option value="open">Open</option>
            <option value="done">Completed</option>
          </select>
          <input value={search} placeholder="Search..." onChange={e=>setSearch(e.target.value)} />
          <select value={sort} onChange={e=>setSort(e.target.value)} aria-label="Sort order">
            <option value="new">Newest</option>
            <option value="old">Oldest</option>
            <option value="az">A-Z</option>
            <option value="za">Z-A</option>
          </select>
        </div>
      );
    });

    const NewTaskForm = memo(function NewTaskForm({ onAdd }) {
      const [title, setTitle] = useState("");
      return (
        <form onSubmit={e=>{ e.preventDefault(); if(title.trim()){ onAdd(title.trim()); setTitle(""); } }} style={{display:'flex',gap:'0.5rem',marginBottom:'0.8rem'}}>
          <input value={title} onChange={e=>setTitle(e.target.value)} placeholder="Add a new task" />
          <button type="submit">Add</button>
        </form>
      );
    });

    const TaskItem = memo(function TaskItem({ task, onToggle, onRemove, onEdit }) {
      const [editing,setEditing] = useState(false);
      const [draft,setDraft] = useState(task.title);

      const commit = () => { if(draft.trim() && draft!==task.title){ onEdit(task.id,draft.trim()); } setEditing(false); };

      return (
        <div className={"task" + (task.done?" done":"")} data-id={task.id}>
          <input type="checkbox" checked={task.done} onChange={()=>onToggle(task.id)} style={{marginTop:4}} />
          <div>
            {editing ? (
              <input autoFocus className="inline-edit" value={draft} onChange={e=>setDraft(e.target.value)} onBlur={commit} onKeyDown={e=>{ if(e.key==='Enter') commit(); if(e.key==='Escape'){ setDraft(task.title); setEditing(false);} }} />
            ) : (
              <>
                <p className="task-title" onDoubleClick={()=>{ setDraft(task.title); setEditing(true); }}>{task.title}</p>
                <div className="muted">Created {new Date(task.created).toLocaleTimeString()} Â· {task.done?"Completed":"Open"}</div>
              </>
            )}
          </div>
          <div style={{display:'flex',flexDirection:'column',gap:4}}>
            <button className="small secondary" onClick={()=>setEditing(e=>!e)}>{editing?"Save":"Edit"}</button>
            <button className="small danger" onClick={()=>onRemove(task.id)}>Del</button>
          </div>
        </div>
      );
    });

    function App(){
      const [tasks,setTasks] = useState(()=>[
        { id:uid(), title:'Explore React docs', done:false, created: Date.now()-50000 },
        { id:uid(), title:'Implement task manager', done:true, created: Date.now()-40000 },
        { id:uid(), title:'Refactor components', done:false, created: Date.now()-30000 },
        { id:uid(), title:'Add filtering & search', done:false, created: Date.now()-20000 }
      ]);
      const [filter,setFilter] = useState('all');
      const [search,setSearch] = useState('');
      const [sort,setSort] = useState('new');

      const addTask = useCallback(title => setTasks(t=>[{ id:uid(), title, done:false, created: Date.now() }, ...t]), []);
      const toggleTask = useCallback(id => setTasks(ts=> ts.map(t=> t.id===id? {...t, done:!t.done}: t)), []);
      const removeTask = useCallback(id => setTasks(ts=> ts.filter(t=> t.id!==id)), []);
      const editTask = useCallback((id,newTitle)=> setTasks(ts=> ts.map(t=> t.id===id?{...t,title:newTitle}:t)), []);
      const clearDone = useCallback(()=> setTasks(ts=> ts.filter(t=> !t.done)), []);

      const filtered = useMemo(()=>{
        let list = tasks;
        if(filter==='open') list = list.filter(t=>!t.done);
        if(filter==='done') list = list.filter(t=>t.done);
        if(search.trim()) list = list.filter(t=> t.title.toLowerCase().includes(search.toLowerCase()));
        switch(sort){
          case 'old': list = [...list].sort((a,b)=> a.created - b.created); break;
          case 'az': list = [...list].sort((a,b)=> a.title.localeCompare(b.title)); break;
          case 'za': list = [...list].sort((a,b)=> b.title.localeCompare(a.title)); break;
          default: list = [...list].sort((a,b)=> b.created - a.created);
        }
        return list;
      }, [tasks, filter, search, sort]);

      const stats = useMemo(()=>({ total: tasks.length, done: tasks.filter(t=>t.done).length }), [tasks]);

      return (
        <div>
          <h2 style={{margin:'0 0 .4rem'}}>Tasks</h2>
          <NewTaskForm onAdd={addTask} />
          <Filters filter={filter} setFilter={setFilter} search={search} setSearch={setSearch} sort={sort} setSort={setSort} />
          <Stats total={stats.total} done={stats.done} filtered={filtered.length} activeFilter={filter} />
          {tasks.length>0 && (
            <div style={{display:'flex',gap:'.5rem',flexWrap:'wrap',marginBottom:'.75rem'}}>
              <button className="secondary small" onClick={()=>setFilter('all')}>Show All</button>
              <button className="secondary small" onClick={()=>setFilter('open')}>Show Open</button>
              <button className="secondary small" onClick={()=>setFilter('done')}>Show Done</button>
              <button className="secondary small" onClick={clearDone} disabled={!stats.done} style={{opacity:!stats.done?.5:1}}>Clear Completed</button>
            </div>
          )}
          <div className="stack" style={{gap:'.55rem'}}>
            {filtered.length===0 && <div className="empty">No tasks match. Try adding or clearing filters.</div>}
            {filtered.map(t=> (
              <TaskItem key={t.id} task={t} onToggle={toggleTask} onRemove={removeTask} onEdit={editTask} />
            ))}
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>