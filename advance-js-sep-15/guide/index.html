<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced JavaScript Revision Guide</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        body { 
            font-family: 'Comic Sans MS', 'Segoe UI', sans-serif; 
            margin: 30px;
            line-height: 1.6;
            color: #333;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f0f8ff;
        }
        h1, h2, h3 { 
            color: #1565c0; 
            border-bottom: 2px solid #42a5f5;
            padding-bottom: 5px;
        }
        h4 {
            color: #1976d2;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        .diagram { 
            margin: 30px 0; 
            text-align: center;
        }
        .diagram img { 
            background: #f8fbff; 
            border-radius: 10px;
            border: 1px solid #ccc; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            max-width: 100%;
            height: auto;
        }
        .analogy {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #2196f3;
        }
        .analogy-title {
            font-weight: bold;
            color: #0d47a1;
            margin-bottom: 5px;
        }
        .code-example {
            background: #f5f5f5;
            border-left: 4px solid #42a5f5;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
            overflow-x: auto;
            padding: 15px;
        }
        .code-example code {
            font-family: Consolas, 'Courier New', monospace;
            font-size: 0.9em;
            color: #333;
        }
        .line-numbers .line-numbers-rows {
            padding-top: 15px;
            border-right: 1px solid #ddd;
        }
        pre[class**="language-"].line-numbers {
            padding-left: 3.8em;
        }
        .highlight {
            background: #fff9c4;
            padding: 2px 4px;
            border-radius: 4px;
            font-family: Consolas, 'Courier New', monospace;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .feature-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        .elements-section { background: #e8f5e9; border-left: 4px solid #4caf50; padding: 20px; border-radius: 8px; margin: 20px 0; }
        .structure-section { background: #fff3e0; border-left: 4px solid #ff9800; padding: 20px; border-radius: 8px; margin: 20px 0; }
        .semantic-section { background: #f3e5f5; border-left: 4px solid #9c27b0; padding: 20px; border-radius: 8px; margin: 20px 0; }
        .attributes-section { background: #e1f5fe; border-left: 4px solid #03a9f4; padding: 20px; border-radius: 8px; margin: 20px 0; }
        .mindblown {
            background: #ffebee;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #f44336;
            text-align: center;
        }
        .step-by-step {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #6c757d;
        }
        dl dt {
            font-weight: bold;
            color: #1565c0;
        }
        dl dd {
            margin-left: 20px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

    <h1>Advanced JavaScript Revision: The Sorcerer's Guide üßô‚Äç‚ôÇÔ∏è</h1>

    <div class="container">
        <h2>Asynchronous JavaScript: Taming Time ‚è≥</h2>
        <p>
            Asynchronous code is how JavaScript handles tasks that take time (like API calls) without freezing the entire program. This is the evolution of that power.
        </p>
        <div class="step-by-step">
            <dl>
                <dt>Callbacks</dt>
                <dd>The original method. A function is passed as an argument to be "called back" later. Can lead to messy, nested code ("Callback Hell").</dd>
                <dt>Promises</dt>
                <dd>A huge improvement. A Promise is an object representing a future result. It can be <strong>pending</strong>, <strong>fulfilled</strong>, or <strong>rejected</strong>. You handle outcomes with <code class="highlight">.then()</code> and <code class="highlight">.catch()</code>.</dd>
                <dt>Async/Await</dt>
                <dd>The modern, clean way. It's "syntactic sugar" over Promises, letting you write async code that looks synchronous and is much easier to read and debug.</dd>
            </dl>
        </div>
        <div class="analogy">
            <div class="analogy-title">üí° The Promise Analogy: Coffee Shop Receipt</div>
            <p>A promise is like the receipt you get from a coffee shop. You don't have your coffee yet, but the receipt *promises* you'll either get your drink (<code class="highlight">fulfilled</code>) or a reason why you can't, like they're out of beans (<code class="highlight">rejected</code>).</p>
        </div>
        
        <h4>Modern Example: Async/Await with Fetch</h4>
        <pre class="code-example line-numbers"><code class="language-javascript">
async function fetchUserData(userId) {
  try {
    // 'await' pauses the function until the promise is settled
    const response = await fetch(`https://api.example.com/users/${userId}`);
    const userData = await response.json();
    console.log(userData);
  } catch (error) {
    // If any 'await' fails, it jumps to the catch block
    console.error("Failed to fetch user:", error);
  }
}
        </code></pre>
    </div>

    <div class="container">
        <h2>The Mysterious `this` Keyword ü§î</h2>
        <p>
            The value of <code class="highlight">this</code> is not fixed; it's determined by **how a function is called** (its "execution context").
        </p>
        <div class="feature-grid">
            <div class="feature-card">
                <h4>Object Method</h4>
                <p>When a function is called as a method on an object, <code class="highlight">this</code> refers to the object it was called on.</p>
            </div>
            <div class="feature-card">
                <h4>Global Context</h4>
                <p>When called outside of any function, <code class="highlight">this</code> refers to the global object (e.g., <code class="highlight">window</code> in browsers).</p>
            </div>
            <div class="feature-card">
                <h4>Arrow Functions `=>`</h4>
                <p><strong>The game-changer!</strong> Arrow functions don't have their own <code class="highlight">this</code>. They inherit it from their parent's scope. This avoids many old bugs where <code class="highlight">this</code> would lose its context.</p>
            </div>
        </div>
    </div>

    <div class="container">
        <h2>Closures: The Function's Memory üß†</h2>
        <p>
            A closure is a function that "remembers" and has access to the variables from the scope where it was created, even after that scope has finished running.
        </p>
        <div class="analogy">
            <div class="analogy-title">üí° The Backpack Analogy</div>
            <p>Think of a function as a backpack. When it's created, it packs all the variables it needs from its local environment into the backpack. It can then carry and use these variables wherever it goes, long after it has left its original "room" (scope).</p>
        </div>
        
        <h4>Example: Creating Private State</h4>
        <pre class="code-example line-numbers"><code class="language-javascript">
function createCounter() {
  let count = 0; // 'count' is a private variable protected by the closure

  // The returned function is the closure
  return function() {
    count++;
    console.log(count);
  };
}

const myCounter = createCounter();
myCounter(); // Logs: 1
myCounter(); // Logs: 2
// You cannot access 'count' directly from the outside!
        </code></pre>
    </div>

    <div class="container">
        <h2>Prototypal Inheritance: The Object Family Tree üå≥</h2>
        <p>
            This is how JavaScript objects inherit features from one another. Every object has a hidden link to another object called its **prototype**.
        </p>
        <div class="step-by-step">
           <dl>
               <dt>Prototype Chain</dt>
               <dd>When you access a property, JS first checks the object itself. If it's not there, it checks the object's prototype, then the prototype's prototype, and so on, until it finds the property or reaches the end of the chain.</dd>
               <dt>The `class` Keyword</dt>
               <dd>Modern `class` syntax is mostly "syntactic sugar" over this underlying prototype system. It makes the code cleaner but doesn't change the fundamental inheritance model.</dd>
           </dl>
        </div>
    </div>

    <div class="container">
        <h2>The Event Loop: JavaScript's Juggling Act ü§π</h2>
        <p>
            JavaScript is single-threaded (it can only do one thing at a time). The Event Loop is the magic that lets it handle asynchronous tasks (like waiting for a timer or an API) without blocking the main thread.
        </p>
        <div class="diagram">
           
        </div>
        <div class="step-by-step">
            <dl>
                <dt>Call Stack</dt>
                <dd>Where functions are executed one by one.</dd>
                <dt>Web APIs</dt>
                <dd>When an async operation (<code class="highlight">setTimeout</code>, <code class="highlight">fetch</code>) starts, it's handed off to the browser to manage.</dd>
                <dt>Callback Queue</dt>
                <dd>When the async task finishes, its callback function is placed in this queue, waiting its turn.</dd>
                <dt>Event Loop</dt>
                <dd>Its one job: If the Call Stack is empty, it takes the first function from the queue and pushes it onto the stack to be run.</dd>
            </dl>
        </div>
    </div>

    <div class="mindblown">
        <h3>üß† Key Takeaway üß†</h3>
        <p>
            Mastering these concepts‚ÄîAsynchronicity, Context (`this`), Closures, Prototypes, and the Event Loop‚Äîis what separates a beginner from an advanced JavaScript developer.
        </p>
        <p>
            You're moving beyond just *what* the code does to understanding *how* and *why* it works. Keep revising and building!
        </p>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
</body>
</html>
