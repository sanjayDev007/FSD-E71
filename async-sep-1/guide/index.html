<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mastering Async JavaScript: Timers & Await</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        body { 
            font-family: 'Comic Sans MS', 'Segoe UI', sans-serif; 
            margin: 30px;
            line-height: 1.6;
            color: #333;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f0f8ff;
        }
        h1, h2, h3 { 
            color: #1565c0; 
            border-bottom: 2px solid #42a5f5;
            padding-bottom: 5px;
        }
        h4 {
            color: #1976d2;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        .diagram { 
            margin: 30px 0; 
            text-align: center;
        }
        .diagram svg { 
            background: #f8fbff; 
            border-radius: 10px;
            border: 1px solid #ccc; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            max-width: 100%;
            height: auto;
        }
        .analogy {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #2196f3;
        }
        .analogy-title {
            font-weight: bold;
            color: #0d47a1;
            margin-bottom: 5px;
        }
        .code-example {
            background: #f5f5f5;
            border-left: 4px solid #42a5f5;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
            overflow-x: auto;
            padding: 15px;
        }
        .code-example code {
            font-family: Consolas, 'Courier New', monospace;
            font-size: 0.9em;
            color: #333;
        }
        .line-numbers .line-numbers-rows {
            padding-top: 15px;
            border-right: 1px solid #ddd;
        }
        pre[class*="language-"].line-numbers {
            padding-left: 3.8em;
        }
        .highlight {
            background: #fff9c4;
            padding: 2px 4px;
            border-radius: 4px;
            font-family: Consolas, 'Courier New', monospace;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .feature-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        .elements-section { background: #e8f5e9; border-left: 4px solid #4caf50; padding: 20px; border-radius: 8px; margin: 20px 0; }
        .structure-section { background: #fff3e0; border-left: 4px solid #ff9800; padding: 20px; border-radius: 8px; margin: 20px 0; }
        .semantic-section { background: #f3e5f5; border-left: 4px solid #9c27b0; padding: 20px; border-radius: 8px; margin: 20px 0; }
        .attributes-section { background: #e1f5fe; border-left: 4px solid #03a9f4; padding: 20px; border-radius: 8px; margin: 20px 0; }
        .comparison {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            flex-wrap: wrap;
            gap: 15px;
        }
        .comparison-box {
            flex: 1;
            padding: 15px;
            border-radius: 8px;
            min-width: 280px;
        }
        .bad-example { background: #ffebee; border: 1px solid #ef9a9a; }
        .good-example { background: #e8f5e9; border: 1px solid #a5d6a7; }
        .mindblown {
            background: #ffebee;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #f44336;
            text-align: center;
        }
        .step-by-step {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #6c757d;
        }
        .tags-demo {
            background: #e0f7fa;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 2px solid #00bcd4;
        }
        dl dt {
            font-weight: bold;
            color: #1565c0;
        }
        dl dd {
            margin-left: 20px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

<h1>Async JavaScript: Timers and the Magic of Async/Await ü™Ñ</h1>

<div class="container">
  <h2>Scheduling the Future</h2>
  <p>
    We've seen how Promises help manage asynchronous tasks that have an unknown duration, like fetching data. But what if we want to deliberately schedule code to run in the future? JavaScript gives us two essential tools for this: <code class="highlight">setTimeout</code> and <code class="highlight">setInterval</code>. Then, we'll explore <code class="highlight">async/await</code>, the modern syntax that makes working with Promises a dream!
  </p>
</div>

<hr>

<div class="container">
  <h2>`setTimeout`: The One-Time Alarm Clock ‚è∞</h2>
  <p>
    The <code class="highlight">setTimeout</code> function schedules a piece of code to run <strong>once</strong> after a specified delay in milliseconds. It's a fundamental tool for delaying execution.
  </p>
  
  <div class="analogy">
    <div class="analogy-title">üí° Analogy: The Microwave Timer</div>
    <p>
      Using `setTimeout` is like setting a timer on a microwave. You put your food in, set it for 2 minutes, and then you can walk away and do other things. When the timer hits zero, it beeps (your function runs), but it only beeps once.
    </p>
  </div>
  
  <h4>How It Works</h4>
  <p>Let's create a button that reveals a secret message after a 3-second delay.</p>
  <pre class="code-example line-numbers"><code class="language-html">
&lt;button id="reveal-btn"&gt;Reveal Secret&lt;/button&gt;
&lt;h3 id="secret-message"&gt;&lt;/h3&gt;
  </code></pre>
  <pre class="code-example line-numbers"><code class="language-javascript">
const revealBtn = document.getElementById('reveal-btn');
const secretMsg = document.getElementById('secret-message');

let timeoutId; // Variable to hold the timer ID

revealBtn.addEventListener('click', () => {
  secretMsg.textContent = 'Thinking of a secret...';
  
  // Schedule the revealMessage function to run after 3000ms (3 seconds)
  timeoutId = setTimeout(revealMessage, 3000);
});

function revealMessage() {
  secretMsg.textContent = 'JavaScript is awesome! ‚ú®';
}

// You can cancel a timeout before it runs using clearTimeout()
// clearTimeout(timeoutId);
  </code></pre>
</div>

<hr>

<div class="container">
  <h2>`setInterval`: The Repeating Bell üîî</h2>
  <p>
    The <code class="highlight">setInterval</code> function is similar, but it schedules a piece of code to run <strong>repeatedly</strong> at a specified interval. It will keep running forever until you explicitly stop it.
  </p>
  
  <div class="analogy">
    <div class="analogy-title">üí° Analogy: The Blinking Light</div>
    <p>
      `setInterval` is like a blinking light on a router. It turns on, then off, then on again, every second, continuously. It doesn't stop until you unplug the router.
    </p>
    
  </div>
  
  <h4>How It Works: A Simple Countdown</h4>
  <p>Let's build a countdown timer that updates every second.</p>
  <pre class="code-example line-numbers"><code class="language-html">
&lt;h2&gt;Countdown: &lt;span id="timer"&gt;10&lt;/span&gt;&lt;/h2&gt;
&lt;button id="stop-btn"&gt;Stop Timer&lt;/button&gt;
  </code></pre>
  <pre class="code-example line-numbers"><code class="language-javascript">
const timerSpan = document.getElementById('timer');
const stopBtn = document.getElementById('stop-btn');

let count = 10;
let intervalId;

function updateCountdown() {
  timerSpan.textContent = count;
  count--;
  
  if (count < 0) {
    // Stop the interval when the countdown is done
    clearInterval(intervalId);
    timerSpan.textContent = 'üöÄ Liftoff!';
  }
}

// Run the updateCountdown function every 1000ms (1 second)
intervalId = setInterval(updateCountdown, 1000);

// Add a way to stop it manually
stopBtn.addEventListener('click', () => {
  clearInterval(intervalId);
  timerSpan.textContent = 'Stopped!';
});
  </code></pre>
</div>

<hr>

<div class="container">
    <h2>`async/await`: The Promise Tamer ü¶Å</h2>
    <p>
        While timers are for scheduling, <code class="highlight">async/await</code> is the modern syntax for handling the flow of <strong>Promises</strong>. It's "syntactic sugar" that lets you write asynchronous code that looks and behaves a lot more like simple, synchronous code, making it much easier to read and understand.
    </p>

    <h4>The Two Keywords</h4>
    <div class="feature-grid">
        <div class="feature-card">
            <h4>`async`</h4>
            <p>You place this keyword before a function declaration. It does two things: it automatically makes the function return a Promise, and it allows you to use `await` inside it.</p>
        </div>
        <div class="feature-card">
            <h4>`await`</h4>
            <p>This keyword can only be used <strong>inside an `async` function</strong>. It tells the function to pause execution and wait for a Promise to be resolved or rejected before moving on to the next line.</p>
        </div>
    </div>

    <h4>Before and After: Fetching Data</h4>
    <p>Let's see how much cleaner our code becomes when we refactor a Promise chain using `async/await`.</p>
    <div class="comparison">
        <div class="comparison-box bad-example">
            <h4>‚ùå The `.then()` Chain</h4>
            <p>This is perfectly valid, but it involves nested functions and can be harder to follow, especially with more complex logic.</p>
            <pre class="code-example"><code class="language-javascript">
function getJokeWithThen() {
  fetch('https://icanhazdadjoke.com/', {
    headers: { 'Accept': 'application/json' }
  })
  .then(response => response.json())
  .then(data => {
    console.log(data.joke);
  })
  .catch(error => {
    console.error('Error:', error);
  });
}
            </code></pre>
        </div>
        <div class="comparison-box good-example">
            <h4>‚úÖ The `async/await` Version</h4>
            <p>This looks like simple, top-down code! We also use a <code class="highlight">try...catch</code> block for error handling, which is a standard pattern you already know.</p>
            <pre class="code-example"><code class="language-javascript">
async function getJokeWithAsync() {
  try {
    const response = await fetch('...', { ... });
    const data = await response.json();
    console.log(data.joke);
  } catch (error) {
    console.error('Error:', error);
  }
}
            </code></pre>
        </div>
    </div>
</div>

<hr>

<div class="mindblown">
    <h2>üß† AHA! Moment! ü§Ø</h2>
    <p>
      <strong>Timers schedule tasks, while `async/await` cleans up promises.</strong><br>
      <code class="highlight">setTimeout</code> and <code class="highlight">setInterval</code> are your tools for saying "run this code later" or "run this code repeatedly." <br><br>
      <code class="highlight">async/await</code> is a revolutionary syntax that doesn't change *how* promises work, but it dramatically changes *how you write them*. It lets you "pause" a function until a promise is ready, leading to code that is incredibly clean, readable, and easier to debug.
    </p>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
<script>
    // Initialize Prism to highlight the code blocks
    Prism.highlightAll();
</script>
</body>
</html>